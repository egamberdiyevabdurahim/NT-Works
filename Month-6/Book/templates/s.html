<!DOCTYPE html>
{% load static %}
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<title>Home Page</title>
</head>
<body>
<!--  -->
<div class="container">
<nav class="navbar navbar-expand-lg btn btn-outline-info">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'home'%}">BookModel</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="container">
    	{% if request.user.is_authenticated %}
      <!-- Example single danger button -->
<div class="btn-group">
  <button type="button" class="btn btn-outline-danger dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
    Action
  </button>
  <ul class="dropdown-menu">
      {% for i in category %}
    <form method="get">
    <li>
      <!-- <a name="name" value={{i.id}} class="dropdown-item" href="">{{i.name}}</a> -->
        <input type="hidden" name="name" value="{{i.category_name}}">
        <button type="submit">{{i.category_name}}</button>
    </li>
  </form>
      {% endfor %}
  </ul>
</div>
    	<!-- Button trigger modal -->
<button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Log-Out
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Log-Out</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Rostdanham Xisobingizdan Chiqib Ketmoqchimisiz?
		<hr>
		<p class="text-danger bg-warning">
		Eslatma:
			Agar Siz Xisobingizni Adresini Yoki Parolini Bilmasangiz Qayta Kirishingiz Qiyin Boladi
			</p>
		<hr>
		Xo'sh Chiqib Ketasizmi
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Yo'q</button>
        <a href="{% url 'logout'%}"><button type="button" class="btn btn-secondary">Ha Chiqib Ketaman</button></a>
      </div>
    </div>
  </div>
</div>
<!--  -->
    	<a href="{% url 'profile'%}"><button type="submit" class="btn btn-outline-danger">{{request.user.username}}</button></a>
    	<a href="{% url 'createnews'%}"><button type="submit" class="btn btn-outline-danger">Create BookModel</button></a>
    	{% else %}
		<a href="{% url 'signup'%}"><button type="submit" class="btn btn-outline-danger">Sign-Up</button></a>
		<a href="{% url 'signin'%}"><button type="submit" class="btn btn-outline-danger">Sign/Log-In</button></a>
{% endif %}
    </div>
    <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="find">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
  </div>
</nav>
</div><br>
<!--  -->


<div class="container">
{%for x in news reversed%}
{% if x.user == request.user%}
<p class="text-primary">{{x.created_at}} | {{x.category}}</p>
<h2><a class="navbar-brand" href="{% url 'opennews' x.id%}">{{x.title|truncatechars:65}}</a></h2>
<a href="{% url 'editnews' x.id%}"><button type="submit" class="btn btn-outline-danger">Edit</button></a>
<!--  -->
<!-- Button trigger modal -->
<button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Delete
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Rostdanham Bu Yangilikni O'chirmoqchimisiz?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Yo'q</button>
        <a href="{% url 'deletenews' x.id%}"><button type="button" class="btn btn-secondary">Ha O'chirmoqchiman</button></a>
      </div>
    </div>
  </div>
</div>
<!--  -->
<p class="text-secondary">{{x.content|truncatechars:150}}</p>
<p class="text-warning">Author : Siz/You</p>

<form method="post" action="{% url 'likenews' x.id %}">
	{% csrf_token %}
  {% if request.user in x.likes.user.all %}
  <button type="submit" class="btn"><span class="xp7jhwk"><div class="x1i10hfl x6umtig x1b1mbwd xaqea5y xav7gou x9f619 xe8uvvx xdj266r x11i5rnm xat24cr x1mh8g0r x16tdsg8 x1hl2dhg xggy1nq x1a2a7pz x6s0dn4 xjbqb8w x1ejq31n xd10rxx x1sy0etr x17r0tee x1ypdohk x78zum5 xl56j7k x1y1aw1k x1sxyh0 xwib8y2 xurb0ha xcdnw81" role="button" tabindex="0"><div class="x6s0dn4 x78zum5 xdt5ytf xl56j7k"><span class="x1ykxiw6 x1ahuga x4hg4is x3oybdh"><svg aria-label="Не нравится" class="x1lliihq x1n2onr6 xxk16z8" fill="currentColor" height="24" role="img" viewBox="0 0 48 48" width="24"><title>Не нравится</title><path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path></svg></span></div></div></span></button>
  {% else %}
  <button type="submit" class="btn"><div class="x1i10hfl x6umtig x1b1mbwd xaqea5y xav7gou x9f619 xe8uvvx xdj266r x11i5rnm xat24cr x1mh8g0r x16tdsg8 x1hl2dhg xggy1nq x1a2a7pz x6s0dn4 xjbqb8w x1ejq31n xd10rxx x1sy0etr x17r0tee x1ypdohk x78zum5 xl56j7k x1y1aw1k x1sxyh0 xwib8y2 xurb0ha xcdnw81" role="button" tabindex="0"><div class="x6s0dn4 x78zum5 xdt5ytf xl56j7k"><span class=""><svg aria-label="Нравится" class="x1lliihq x1n2onr6 xyb1xck" fill="currentColor" height="24" role="img" viewBox="0 0 24 24" width="24"><title>Нравится</title><path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path></svg></span></div></div></button>
  {% endif %}<span>{{x.sum_of_likes}}</span>
</form>
<form method="post" action="{% url 'dislikenews' x.id %}">
<!-- <button type="submit" class="btn"><img src="{% static 'images/DisLike.gif'%}"></button> -->
  {% csrf_token %}
  {% if request.user in x.dislikes.user.all %}
<button type="submit" class="btn btn-danger">DisLike</button>

{% else %}
<button type="submit">DisLike</button>
{% endif %}
<p>{{x.sum_of_dislikes}}</p>
</form>
<hr>
{%else%}
<p class="text-primary">{{x.created_at}} | {{x.category}}</p>
<h2><a class="navbar-brand" href="{% url 'opennews' x.id%}">{{x.title|truncatechars:65}}</a></h2>
<p class="text-secondary">{{x.content|truncatechars:150}}</p>
<p class="text-warning">Author : {{x.user}}</p>

<form method="post" action="{% url 'likenews' x.id %}">
	{% csrf_token %}
  {% if request.user in x.likes.user.all %}
  <button type="submit" class="btn"><span class="xp7jhwk"><div class="x1i10hfl x6umtig x1b1mbwd xaqea5y xav7gou x9f619 xe8uvvx xdj266r x11i5rnm xat24cr x1mh8g0r x16tdsg8 x1hl2dhg xggy1nq x1a2a7pz x6s0dn4 xjbqb8w x1ejq31n xd10rxx x1sy0etr x17r0tee x1ypdohk x78zum5 xl56j7k x1y1aw1k x1sxyh0 xwib8y2 xurb0ha xcdnw81" role="button" tabindex="0"><div class="x6s0dn4 x78zum5 xdt5ytf xl56j7k"><span class="x1ykxiw6 x1ahuga x4hg4is x3oybdh"><svg aria-label="Не нравится" class="x1lliihq x1n2onr6 xxk16z8" fill="currentColor" height="24" role="img" viewBox="0 0 48 48" width="24"><title>Не нравится</title><path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path></svg></span></div></div></span></button>
  {% else %}
  <button type="submit" class="btn"><div class="x1i10hfl x6umtig x1b1mbwd xaqea5y xav7gou x9f619 xe8uvvx xdj266r x11i5rnm xat24cr x1mh8g0r x16tdsg8 x1hl2dhg xggy1nq x1a2a7pz x6s0dn4 xjbqb8w x1ejq31n xd10rxx x1sy0etr x17r0tee x1ypdohk x78zum5 xl56j7k x1y1aw1k x1sxyh0 xwib8y2 xurb0ha xcdnw81" role="button" tabindex="0"><div class="x6s0dn4 x78zum5 xdt5ytf xl56j7k"><span class=""><svg aria-label="Нравится" class="x1lliihq x1n2onr6 xyb1xck" fill="currentColor" height="24" role="img" viewBox="0 0 24 24" width="24"><title>Нравится</title><path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path></svg></span></div></div></button>
  {% endif %}

<span>{{x.sum_of_likes}}</span>
</form>

<form method="post" action="{% url 'dislikenews' x.id %}">
  {% csrf_token %}
<!-- <button type="submit" class="btn"><img src="{% static 'images/DisLike.gif'%}"></button> -->
{% if request.user in x.dislikes.user.all %}
<button type="submit" class="btn btn-danger">DisLike</button>

{% else %}
<button type="submit">DisLike</button>
{% endif %}
<span>{{x.sum_of_dislikes}}</span>
</form><hr>
{%endif%}

{%endfor%}
</div>



<nav aria-label="Page navigation example" class="col-1 mx-auto">
  <ul class="pagination">
  	{% if news.has_previous %}
    <li class="page-item">
      <a class="page-link" href="{% url 'home'%}?page={{news.previous_page_number}}" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
      {% endif %}
    </li>
    <li class="page-item"><a class="page-link" href="#bilmayman#">{{news.number}}</a></li>
    <li class="page-item">
    	{% if news.has_next %}
      <a class="page-link" href="{% url 'home'%}?page={{news.next_page_number}}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  	{% endif %}
  </ul>
</nav>
<yt-button-shape><button class="yt-spec-button-shape-next yt-spec-button-shape-next--tonal yt-spec-button-shape-next--mono yt-spec-button-shape-next--size-m yt-spec-button-shape-next--icon-button yt-spec-button-shape-next--segmented-end" aria-pressed="false" aria-label="Поставить отметку &quot;Не нравится&quot;" title="" style=""><div class="yt-spec-button-shape-next__icon" aria-hidden="true"><yt-icon style="width: 24px; height: 24px;"><!--css-build:shady--><!--css-build:shady--><yt-icon-shape class="style-scope yt-icon"><icon-shape class="yt-spec-icon-shape"><div style="width: 100%; height: 100%; fill: currentcolor;"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;"><path d="M17,4h-1H6.57C5.5,4,4.59,4.67,4.38,5.61l-1.34,6C2.77,12.85,3.82,14,5.23,14h4.23l-1.52,4.94C7.62,19.97,8.46,21,9.62,21 c0.58,0,1.14-0.24,1.52-0.65L17,14h4V4H17z M10.4,19.67C10.21,19.88,9.92,20,9.62,20c-0.26,0-0.5-0.11-0.63-0.3 c-0.07-0.1-0.15-0.26-0.09-0.47l1.52-4.94l0.4-1.29H9.46H5.23c-0.41,0-0.8-0.17-1.03-0.46c-0.12-0.15-0.25-0.4-0.18-0.72l1.34-6 C5.46,5.35,5.97,5,6.57,5H16v8.61L10.4,19.67z M20,13h-3V5h3V13z"></path></svg></div></icon-shape></yt-icon-shape></yt-icon></div><yt-touch-feedback-shape style="border-radius: inherit;"><div class="yt-spec-touch-feedback-shape yt-spec-touch-feedback-shape--touch-response" aria-hidden="true"><div class="yt-spec-touch-feedback-shape__stroke" style=""></div><div class="yt-spec-touch-feedback-shape__fill" style=""></div></div></yt-touch-feedback-shape></button></yt-button-shape>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>